(function(){"use strict";var e={86:function(e,t,a){a.d(t,{C:function(){return r}});const r="https://vue-tzr.skillbox.cc"},3736:function(e,t,a){function r(e){return(new Intl.NumberFormat).format(e)}a.d(t,{Z:function(){return r}})},7460:function(e,t,a){a.d(t,{Z:function(){return n}});var r=a(4870),o=a(3396);const l=(0,r.iH)(new Set);function n(){const e=(0,o.FN)().uid,t=(0,r.iH)(!1),a=()=>{t.value=!0,l.value.add(e)},n=()=>{t.value=!0,l.value.delete(e)},c=(0,o.Fl)((()=>!!l.value.size)),s=()=>{c.value?(document.body.style.paddingRight=window.innerWidth-document.documentElement.clientWidth+"px",document.body.style.overflow="hidden"):(document.body.style.overflow=null,document.body.style.paddingRight=null)};return(0,o.YP)(c,(()=>s())),{doOpen:a,doClose:n,isOpen:t,isSomeOpen:c}}},9098:function(e,t,a){a.d(t,{Z:function(){return d}});var r=a(6265),o=a.n(r),l=a(86),n=a(3736),c=a(4870),s=a(3396),i=a(65),u=a(2483);function d(){const e=(0,u.yj)(),t=(0,c.iH)(null),a=(0,s.Fl)((()=>({...t.value,imageSrc:t.value?.preview?.file?.url}))),r=(0,s.Fl)((()=>t.value.category)),d=(0,c.qj)({isLoading:!1,isFailed:!1}),p=e=>{d.isLoading=!0,d.isFailed=!1,o().get(l.C+"/api/products/"+e).then((e=>t.value={...e.data,productPrice:(0,n.Z)(e.data.price)})).catch((()=>d.isFailed=!0)).then((()=>d.isLoading=!1))},m=(0,s.Fl)((()=>t.value?a.value.offers.reduce(((e,t)=>[...e,{id:t?.id,title:t?.title,value:t?.propValues?.at(0)?.value,price:(0,n.Z)(t?.price)}]),[]):[])),_=(0,s.Fl)((()=>f.value?m.value.find((e=>e.value===f.value)):m.value?.at(0))),f=(0,c.iH)(e.query.offer||m.value?.at(0)?.value||null),v=(0,c.iH)(e.query.color||a.value.colors?.at(0)?.color?.id||null),g=(0,c.qj)({isAdded:!1,isSending:!1}),y=(0,i.oR)(),b=(e,t,a)=>{g.isAdded=!1,g.isSending=!0,y.dispatch("addProductToCart",{productOfferId:e,quantity:t,colorId:a}).then((()=>{g.isSending=!0,g.isSending=!1}))},k=(0,c.iH)([{name:"DescriptionTab",text:"Описание"},{name:"SpecificationsTab",text:"Характеристики"}]),h=(0,c.iH)(k.value[0].name),w=e=>{h.value=e};return{product:a,category:r,fetchStatus:d,fetchProduct:p,addingStatus:g,addProduct:b,offersPrice:m,selectedOffersValue:f,selectedColorValue:v,content:_,tabs:k,switchTabs:w,selectedTab:h}}},381:function(e,t,a){var r=a(9242),o=a(3396);const l=(0,o._)("div",{id:"teleport-target"},null,-1);function n(e,t,a,r,n,c){const s=(0,o.up)("s-header"),i=(0,o.up)("router-view"),u=(0,o.up)("s-footer");return(0,o.wg)(),(0,o.iD)(o.HY,null,[r.isSomeOpen?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(s,{key:0})),(0,o.Wm)(i),r.isSomeOpen?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(u,{key:1})),l],64)}const c={class:"header"},s={class:"header__wrapper container"},i=(0,o._)("img",{src:"img/svg/logo-tech.svg",alt:"Логотип интернет магазина Технозавррр",width:"190",height:"33"},null,-1),u=(0,o._)("a",{class:"header__tel",href:"tel:8 800 600 90 09"}," 8 800 600 90 09 ",-1);function d(e,t,a,r,l,n){const d=(0,o.up)("router-link"),p=(0,o.up)("cart-indicator");return(0,o.wg)(),(0,o.iD)("header",c,[(0,o._)("div",s,[(0,o.Wm)(d,{class:"header__info",to:{name:"main"}},{default:(0,o.w5)((()=>[(0,o.Uk)("Каталог")])),_:1}),(0,o.Wm)(d,{class:"header__logo",to:{name:"main"}},{default:(0,o.w5)((()=>[i])),_:1}),u,(0,o.Wm)(p)])])}var p=a(7139);const m=(0,o._)("svg",{width:"30",height:"21",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-cart"})],-1),_={class:"header__count","aria-label":"Количество товаров"};function f(e,t){const a=(0,o.up)("router-link");return(0,o.wg)(),(0,o.j4)(a,{to:{name:"cart"},class:"header__cart","aria-label":"Корзина с товарами"},{default:(0,o.w5)((()=>[m,(0,o._)("span",_,(0,p.zw)(e.$store.state.cartProducts.length),1)])),_:1})}var v=a(89);const g={},y=(0,v.Z)(g,[["render",f]]);var b=y,k=a(65),h=(0,o.aZ)({components:{CartIndicator:b},setup(){const e=(0,k.oR)(),t=localStorage.getItem("userAccessKey");t&&e.commit("updateUserAccessKey",t),e.dispatch("loadCart")}});const w=(0,v.Z)(h,[["render",d]]);var P=w;const C={class:"footer"},D=(0,o.uE)('<div class="footer__wrapper container"><ul class="footer__links"><li><a class="footer__link" href="#"> Каталог </a></li><li><a class="footer__link" href="tel:88006009009"> 8 800 600 90 09 </a></li><li><a class="footer__link" href="mailto:hi@technozavrrr.com"> hi@technozavrrr.com </a></li><li><a class="footer__link" href="#"> Распродажа </a></li><li><a class="footer__link footer__link--medium" href="#"> Заказать звонок </a></li></ul><ul class="footer__social social"><li class="social__item"><a class="social__link" href="#" aria-label="Вконтакте"><svg width="20" height="11" fill="currentColor"><use xlink:href="#icon-vk"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Инстаграм"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-insta"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Facebook"><svg width="17" height="17" fill="currentColor"><use xlink:href="#icon-facebook"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Twitter"><svg width="17" height="14" fill="currentColor"><use xlink:href="#icon-twitter"></use></svg></a></li><li class="social__item"><a class="social__link" href="#" aria-label="Telegram"><svg width="19" height="17" fill="currentColor"><use xlink:href="#icon-telegram"></use></svg></a></li></ul><p class="footer__desc"> Все права на материалы, находящиеся на сайте, охраняются в соответствии с законодательством РФ, в том числе об авторском праве и смежных правах. </p><ul class="footer__data"><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Политика конфиденциальности </a></li><li><a class="footer__link" href="#" target="_blank" rel="noopener" type="application/pdf"> Публичная оферта </a></li></ul><span class="footer__copyright"> © 2020 Технозавррр </span></div>',1),V=[D];function F(e,t){return(0,o.wg)(),(0,o.iD)("footer",C,V)}const T={},Z=(0,v.Z)(T,[["render",F]]);var O=Z,I=a(7460),S={components:{SHeader:P,SFooter:O},setup(){const{isSomeOpen:e}=(0,I.Z)();return{isSomeOpen:e}}};const z=(0,v.Z)(S,[["render",n]]);var q=z,H=a(2483);const A={class:"content container"},j={class:"content__top content__top--catalog"},U=(0,o._)("h1",{class:"content__title"},"Каталог",-1),L={class:"content__info"},K={class:"content__catalog"},x={class:"catalog"},W={key:1};function B(e,t,a,l,n,c){const s=(0,o.up)("product-filter"),i=(0,o.up)("preloader-pic"),u=(0,o.up)("product-list"),d=(0,o.up)("base-pagination");return(0,o.wg)(),(0,o.iD)("main",A,[(0,o._)("div",j,[U,(0,o._)("span",L,(0,p.zw)(e.messageTotalProducts),1)]),(0,o._)("div",K,[(0,o.Wm)(s,{onGetProducts:e.loadProducts},null,8,["onGetProducts"]),(0,o._)("section",x,[e.productsLoading?((0,o.wg)(),(0,o.j4)(i,{key:0})):(0,o.kq)("",!0),e.productsLoadingFailed?((0,o.wg)(),(0,o.iD)("div",W,[(0,o.Uk)(" Произошла ошибка при загрузки товаров "),(0,o._)("button",{onClick:t[0]||(t[0]=(0,r.iM)(((...t)=>e.loadProducts&&e.loadProducts(...t)),["prevent"]))},"попробовать еще раз")])):(0,o.kq)("",!0),e.productsLoading?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(u,{key:2,list:e.productsPageList},null,8,["list"])),!e.productsLoading&&e.productsPageList.length?((0,o.wg)(),(0,o.j4)(d,{key:3,modelValue:e.page,"onUpdate:modelValue":t[1]||(t[1]=t=>e.page=t),count:e.countProducts,"per-page":e.productsPerPage,"onUpdate:perPage":t[2]||(t[2]=t=>e.productsPerPage=t)},null,8,["modelValue","count","per-page"])):(0,o.kq)("",!0)])])])}var M=a(4877),Y=a(86),E=a(6265),R=a.n(E);const $={key:0,class:"catalog__list"};function G(e,t,a,r,l,n){const c=(0,o.up)("product-item");return e.list.length?((0,o.wg)(),(0,o.iD)("ul",$,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.list,(e=>((0,o.wg)(),(0,o.j4)(c,{item:e,key:e.id},null,8,["item"])))),128))])):(0,o.kq)("",!0)}const N={class:"catalog__item"},Q=["src","srcset","alt"],J={href:"#"},X={class:"catalog__price"},ee={key:0,class:"colors colors--black"},te={class:"colors__label"},ae=["name","value"],re={key:1,class:"sizes"},oe={class:"sizes__label"},le=["name","value","checked"],ne={class:"sizes__value"};function ce(e,t,a,l,n,c){const s=(0,o.up)("router-link"),i=(0,o.up)("product-quick-view"),u=(0,o.up)("base-modal");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("li",N,[(0,o.Wm)(s,{to:{name:"product",params:{id:e.item.id},query:{offer:e.selectedOffersValue,color:e.selectedColor}},class:"catalog__pic"},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e.item.imageSrc,srcset:e.item.imageSrcset,alt:e.item.title},null,8,Q)])),_:1},8,["to"]),(0,o._)("h3",{class:"catalog__title",onClick:t[0]||(t[0]=(0,r.iM)((t=>e.openVisionQuickView(e.item.id)),["prevent"]))},[(0,o._)("a",J,(0,p.zw)(e.content.title),1)]),(0,o._)("span",X,(0,p.zw)(e.content.price)+" ₽",1),e.item.colors?.length&&e.item.mainProp?.code!==e.typesProps.color.code?((0,o.wg)(),(0,o.iD)("ul",ee,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.item.colors,(a=>((0,o.wg)(),(0,o.iD)("li",{key:a.id,class:"colors__item"},[(0,o._)("label",te,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",name:`${e.item.slug} colors`,value:a.color.id,"onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedColor=t)},null,8,ae),[[r.G2,e.selectedColor]]),(0,o._)("span",{class:"colors__value",style:(0,p.j5)({"background-color":a.color.code})},null,4)])])))),128))])):(0,o.kq)("",!0),e.offersPrice?((0,o.wg)(),(0,o.iD)("ul",re,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.offersPrice,(a=>((0,o.wg)(),(0,o.iD)("li",{key:a.value,class:"sizes__item"},[(0,o._)("label",oe,[(0,o.wy)((0,o._)("input",{class:"sizes__radio sr-only",type:"radio",name:`${e.item.slug} offers`,value:a.value,checked:a.value===e.selectedOffersValue,"onUpdate:modelValue":t[2]||(t[2]=t=>e.selectedOffersValue=t)},null,8,le),[[r.G2,e.selectedOffersValue]]),(0,o._)("span",ne,(0,p.zw)(a.value),1)])])))),128))])):(0,o.kq)("",!0)]),(0,o.Wm)(u,{open:e.isQuickViewOpen,"onUpdate:open":t[3]||(t[3]=t=>e.isQuickViewOpen=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{"product-id":e.currentProductId,"selected-offer":e.selectedOffersValue,"selected-color":e.selectedColor},null,8,["product-id","selected-offer","selected-color"])])),_:1},8,["open"])],64)}var se=a(3736),ie=a(3918),ue=Object.freeze({built_in_memory:{title:"Встроенная память",code:"built_in_memory"},color:{title:"Цвет",code:"color"},speed:{title:"Скорость",code:"speed"},video_resolution:{title:"Разрешение видео",code:"video_resolution"},battery_power:{title:"Питание",code:"battery_power"},construction_type:{title:"Тип конструкции",code:"construction_type"}}),de=a(4870),pe=(0,o.aZ)({components:{BaseModal:ie.Z,ProductQuickView:(0,o.RC)({loader:()=>a.e(474).then(a.bind(a,9474))})},props:{item:{type:Object}},setup(e){const t=(0,de.iH)(null),a=(0,o.Fl)({get(){return!!t.value},set(e){e||(t.value=null)}}),r=(0,o.Fl)((()=>e.item.offers.reduce(((e,t)=>[...e,{title:t.title,value:t?.propValues.at(0)?.value,price:(0,se.Z)(t.price)}]),[]))),l=(0,de.iH)(r.value.at(0)?.value||null),n=(0,de.iH)(e.item.colors.at(0)?.color?.id||null),c=(0,o.Fl)((()=>l.value?r.value.find((e=>e.value===l.value)):r.value.at(0))),s=e=>{t.value=e};return{selectedColor:n,isQuickViewOpen:a,content:c,openVisionQuickView:s,currentProductId:t,offersPrice:r,selectedOffersValue:l,numberFormat:se.Z,typesProps:ue}}});const me=(0,v.Z)(pe,[["render",ce]]);var _e=me,fe=(0,o.aZ)({components:{ProductItem:_e},props:{list:{type:Array}}});const ve=(0,v.Z)(fe,[["render",G]]);var ge=ve;const ye={class:"catalog__pagination"},be={class:"pagination"},ke={class:"pagination__item"},he=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-left"})],-1),we=[he],Pe=["onClick"],Ce={class:"pagination__item"},De=(0,o._)("svg",{width:"8",height:"14",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-arrow-right"})],-1),Ve=[De];function Fe(e,t,a,l,n,c){const s=(0,o.up)("custom-counter");return(0,o.wg)(),(0,o.iD)("div",ye,[(0,o._)("ul",be,[(0,o._)("li",ke,[(0,o._)("a",{onClick:t[0]||(t[0]=(0,r.iM)((t=>e.btnClickPrev(e.page)),["prevent"])),class:(0,p.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":1===e.page}]),"aria-label":"Предыдущая страница"},we,2)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.pages,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"pagination__item",key:t},[(0,o._)("a",{href:"#",class:(0,p.C_)(["pagination__link",{"pagination__link--current":t===e.page}]),onClick:(0,r.iM)((a=>e.paginate(t)),["prevent"])},(0,p.zw)(t),11,Pe)])))),128)),(0,o._)("li",Ce,[(0,o._)("a",{onClick:t[1]||(t[1]=(0,r.iM)((t=>e.btnClickNext(e.page)),["prevent"])),class:(0,p.C_)(["pagination__link pagination__link--arrow",{"pagination__link--disabled":e.page===e.pages}]),href:"#","aria-label":"Следующая страница"},Ve,2)])]),(0,o.Wm)(s,{modelValue:e.perPageProducts,"onUpdate:modelValue":t[2]||(t[2]=t=>e.perPageProducts=t)},null,8,["modelValue"])])}var Te=a(9074),Ze=(0,o.aZ)({props:["modelValue","count","perPage"],components:{customCounter:Te.Z},setup(e,{emit:t}){const a=(0,o.Fl)((()=>Math.ceil(e.count/l.value))),r=(0,o.Fl)((()=>e.modelValue)),l=(0,o.Fl)({get(){return e.perPage},set(e){t("update:perPage",e<=0?1:e)}}),n=e=>t("update:modelValue",e),c=e=>{a.value!==r.value&&n(e+1)},s=e=>{1!==r.value&&n(e-1)};return{pages:a,page:r,paginate:n,btnClickPrev:s,btnClickNext:c,perPageProducts:l}}});const Oe=(0,v.Z)(Ze,[["render",Fe]]);var Ie=Oe;const Se={class:"filter"},ze=(0,o._)("h2",{class:"filter__title"},"Фильтры",-1),qe={class:"form__block"},He=(0,o._)("legend",{class:"form__legend"},"Цена",-1),Ae={class:"form__label form__label--price"},je=(0,o._)("span",{class:"form__value"},"От",-1),Ue={class:"form__label form__label--price"},Le=(0,o._)("span",{class:"form__value"},"До",-1),Ke={class:"form__block"},xe=(0,o._)("legend",{class:"form__legend"},"Категория",-1),We={class:"form__label form__label--select"},Be=(0,o._)("option",{value:"0"},"Все категории",-1),Me=["value"],Ye={class:"form__block"},Ee=(0,o._)("legend",{class:"form__legend"},"Цвет",-1),Re={class:"colors"},$e={class:"colors__label"},Ge=["value"],Ne={class:"form__legend"},Qe={class:"check-list"},Je={class:"check-list__label"},Xe=["onUpdate:modelValue","checked"],et={class:"check-list__desc"},tt=(0,o._)("button",{class:"filter__submit button button--primery",type:"submit"}," Применить ",-1);function at(e,t,a,l,n,c){return(0,o.wg)(),(0,o.iD)("aside",Se,[ze,(0,o._)("form",{class:"filter__form form",action:"#",method:"get",onSubmit:t[5]||(t[5]=(0,r.iM)(((...t)=>e.submit&&e.submit(...t)),["prevent"]))},[(0,o._)("fieldset",qe,[He,(0,o._)("label",Ae,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"min-price","onUpdate:modelValue":t[0]||(t[0]=t=>e.currentPriceFrom=t)},null,512),[[r.nr,e.currentPriceFrom,void 0,{number:!0}]]),je]),(0,o._)("label",Ue,[(0,o.wy)((0,o._)("input",{class:"form__input",type:"text",name:"max-price","onUpdate:modelValue":t[1]||(t[1]=t=>e.currentPriceTo=t)},null,512),[[r.nr,e.currentPriceTo,void 0,{number:!0}]]),Le])]),(0,o._)("fieldset",Ke,[xe,(0,o._)("label",We,[(0,o.wy)((0,o._)("select",{class:"form__select",name:"category","onUpdate:modelValue":t[2]||(t[2]=t=>e.currentCategoryId=t)},[Be,((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.categories,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,p.zw)(e.title),9,Me)))),128))],512),[[r.bM,e.currentCategoryId,void 0,{number:!0}]])])]),(0,o._)("fieldset",Ye,[Ee,(0,o._)("ul",Re,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.colors,(a=>((0,o.wg)(),(0,o.iD)("li",{key:a.id,class:"colors__item"},[(0,o._)("label",$e,[(0,o.wy)((0,o._)("input",{"onUpdate:modelValue":t[3]||(t[3]=t=>e.currentCheckColor=t),class:"colors__radio sr-only",type:"radio",name:"color",value:a.id},null,8,Ge),[[r.G2,e.currentCheckColor]]),(0,o._)("span",{class:"colors__value",style:(0,p.j5)({"background-color":a.code})},null,4)])])))),128))])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.productPropsData?.productProps,(e=>((0,o.wg)(),(0,o.iD)("fieldset",{class:"form__block",key:e.id},[(0,o._)("legend",Ne,(0,p.zw)(e.title),1),(0,o._)("ul",Qe,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.availableValues,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{class:"check-list__item",key:t},[(0,o._)("label",Je,[(0,o.wy)((0,o._)("input",{class:"check-list__check sr-only",type:"checkbox",name:"volume","onUpdate:modelValue":t=>e.isChecked=t,checked:e.isChecked},null,8,Xe),[[r.e8,e.isChecked]]),(0,o._)("span",et,[(0,o.Uk)((0,p.zw)(e.value)+" ",1),(0,o._)("span",null,(0,p.zw)(e.productsCount),1)])])])))),128))])])))),128)),tt,(0,o._)("button",{class:"filter__reset button button--second",type:"button",onClick:t[4]||(t[4]=(0,r.iM)(((...t)=>e.reset&&e.reset(...t)),["prevent"]))}," Сбросить ")],32)])}var rt=(0,o.aZ)({setup(e,{emit:t}){const a=(0,H.tv)(),r=(0,H.yj)(),l=(0,de.iH)({}),n=(0,o.Fl)((()=>l.value?l.value.items:[])),c=(0,de.iH)({}),s=(0,o.Fl)((()=>c.value?c.value.items:[])),i=(0,de.iH)(0),u=(0,de.iH)(0),d=(0,de.iH)(r.query.categoryId?r.query.categoryId:0),p=(0,de.iH)(null),m=(0,de.iH)({}),_=()=>{a.replace({query:{categoryId:d.value}}),t("get-products",{priceFrom:i.value,priceTo:u.value,categoryId:d.value,checkColor:p.value,productProps:m.value?.productProps})},f=()=>{a.replace(),i.value=0,u.value=0,d.value=0,p.value=null,m.value=[],t("get-products",{categoryId:0})},v=()=>{try{R().get(Y.C+"/api/productCategories").then((e=>{l.value=e.data}))}catch(e){console.error(e),l.value={}}},g=()=>{try{R().get(Y.C+"/api/colors").then((e=>{c.value=e.data}))}catch(e){console.error(e),c.value={}}},y=async()=>{await v(),await g()},b=e=>{try{R().get(Y.C+"/api/productCategories/"+e).then((e=>{m.value=e.data,m.value.productProps.length&&m.value.productProps&&m.value.productProps.map((e=>e.availableValues.map((e=>e.isChecked=!1))))}))}catch(t){console.error(t),m.value.data={}}};return(0,o.YP)(d,(e=>{e?b(e):m.value={}}),{immediate:!0}),(0,o.bv)((()=>{y()})),{submit:_,currentPriceFrom:i,currentPriceTo:u,currentCategoryId:d,categories:n,colors:s,currentCheckColor:p,reset:f,productPropsData:m}}});const ot=(0,v.Z)(rt,[["render",at]]);var lt=ot;function nt(e,t){e=Math.abs(e)%100;let a=e%10;return e>10&&e<20?t[2]:a>1&&a<5?t[1]:1===a?t[0]:t[2]}var ct=(0,o.aZ)({components:{ProductList:ge,BasePagination:Ie,ProductFilter:lt,PreloaderPic:M.Z},setup(){const e=(0,H.yj)(),t=(0,de.iH)(null),a=(0,o.Fl)((()=>t.value?t.value.items.map((e=>({...e,imageSrc:e?.preview?.file?.url}))):[])),r=(0,o.Fl)((()=>t.value?t.value.pagination.total:[])),l=(0,de.iH)(!0),n=(0,de.iH)(!1),c=(0,de.iH)(1),s=(0,de.iH)(12),i=(0,de.iH)(null),u=(0,o.Fl)((()=>t.value?.pagination?.total)),d=(0,o.Fl)((()=>{const e=["товар","товара","товаров"];return u.value?u.value+" "+nt(u.value,e):null})),p=a=>{window.scrollTo({top:0,behavior:"smooth"}),l.value=!0,n.value=!1,clearTimeout(i.value);let r={};if(a?.productProps){const e=a?.productProps||[];r=e.map((e=>({...e,availableValues:e?.availableValues.filter((e=>!1!==e.isChecked))}))).filter((e=>e?.availableValues.length)).reduce(((e,t)=>({...e,[`props[${t.code}]`]:t.availableValues.map((e=>e.value))})),{})}const o={page:c.value,limit:s.value,categoryId:a?.categoryId??e.query.categoryId,colorId:a?.checkColor};a?.priceFrom&&(o.minPrice=a?.priceFrom),a?.priceTo&&(o.maxPrice=a?.priceTo),i.value=setTimeout((()=>{R().get(Y.C+"/api/products",{params:{...o,...r}}).then((e=>t.value=e.data)).catch((()=>n.value=!0)).then((()=>l.value=!1))}),500)};return(0,o.YP)(c,(()=>{p()})),(0,o.YP)(s,(e=>{clearTimeout(i.value),(e||0===e)&&(i.value=setTimeout((()=>p()),500))})),(0,o.bv)((()=>{p()})),{productsLoadingFailed:n,messageTotalProducts:d,loadProducts:p,productsPageList:a,page:c,countProducts:r,productsPerPage:s,productsLoading:l}}});const st=(0,v.Z)(ct,[["render",B]]);var it=st;function ut(e,t){return(0,o.wg)(),(0,o.iD)("h1",null,"Страница не найдена")}const dt={},pt=(0,v.Z)(dt,[["render",ut]]);var mt=pt;const _t={key:0,class:"content container"},ft={key:1,class:"content container"},vt={key:2,class:"content container"},gt={class:"content__top"},yt={class:"item"},bt={class:"item__pics pics"},kt={class:"pics__wrapper"},ht=["src","srcset","alt"],wt={class:"item__info"},Pt={class:"item__code"},Ct={class:"item__title"},Dt={class:"item__form"},Vt={class:"item__price"},Ft={key:0,class:"form__block"},Tt=(0,o._)("legend",{class:"form__legend"},"Цвет:",-1),Zt={class:"colors"},Ot={class:"colors__label"},It=["name","value"],St={key:1,class:"form__block"},zt={class:"form__legend"},qt={class:"sizes sizes--primery"},Ht={class:"sizes__label"},At=["name","value","checked"],jt={class:"sizes__value"},Ut={class:"item__row"},Lt=["disabled"],Kt={key:2},xt={key:3},Wt={class:"item__desc"};function Bt(e,t,a,l,n,c){const s=(0,o.up)("preloader-pic"),i=(0,o.up)("base-breadcrumbs"),u=(0,o.up)("custom-counter"),d=(0,o.up)("base-modal"),m=(0,o.up)("BaseTabs");return e.productStatus.isLoading?((0,o.wg)(),(0,o.iD)("main",_t,[(0,o.Wm)(s)])):e.productStatus.isFailed?((0,o.wg)(),(0,o.iD)("main",ft," Не удалось загрузить товар ")):((0,o.wg)(),(0,o.iD)("main",vt,[(0,o._)("div",gt,[(0,o.Wm)(i,{crumbs:e.breadcrumbsData},null,8,["crumbs"])]),(0,o._)("section",yt,[(0,o._)("div",bt,[(0,o._)("div",kt,[(0,o._)("img",{width:"570",height:"570",src:e.product.imageSrc,srcset:e.product.imageSrcset,alt:e.product.title},null,8,ht)])]),(0,o._)("div",wt,[(0,o._)("span",Pt,"Артикул: "+(0,p.zw)(e.product.id),1),(0,o._)("h2",Ct,(0,p.zw)(e.content.title),1),(0,o._)("div",Dt,[(0,o._)("form",{class:"form",action:"#",method:"POST",onSubmit:t[4]||(t[4]=(0,r.iM)((t=>e.doAddToCart(e.content.id,e.productAmount,e.selectedColorValue)),["prevent"]))},[(0,o._)("b",Vt,(0,p.zw)(e.content.price)+" ₽ ",1),e.product.colors&&e.product.mainProp?.code!==e.typesProps.color.code?((0,o.wg)(),(0,o.iD)("fieldset",Ft,[Tt,(0,o._)("ul",Zt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.product.colors,((a,l)=>((0,o.wg)(),(0,o.iD)("li",{key:l,class:"colors__item"},[(0,o._)("label",Ot,[(0,o.wy)((0,o._)("input",{class:"colors__radio sr-only",type:"radio",name:`${e.product.slug} colors`,value:a.color.id,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedColorValue=t)},null,8,It),[[r.G2,e.selectedColorValue]]),(0,o._)("span",{class:"colors__value",style:(0,p.j5)({"background-color":a.color.code})},null,4)])])))),128))])])):(0,o.kq)("",!0),e.offersPrice?((0,o.wg)(),(0,o.iD)("fieldset",St,[(0,o._)("legend",zt,(0,p.zw)(e.product.mainProp.title),1),(0,o._)("ul",qt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.offersPrice,((a,l)=>((0,o.wg)(),(0,o.iD)("li",{key:l,class:"sizes__item"},[(0,o._)("label",Ht,[(0,o.wy)((0,o._)("input",{class:"sizes__radio sr-only",name:`${e.product.slug} offers`,value:a.value,checked:a.value===e.selectedOffersValue,type:"radio","onUpdate:modelValue":t[1]||(t[1]=t=>e.selectedOffersValue=t)},null,8,At),[[r.G2,e.selectedOffersValue]]),(0,o._)("span",jt,(0,p.zw)(a.value),1)])])))),128))])])):(0,o.kq)("",!0),(0,o._)("div",Ut,[(0,o.Wm)(u,{modelValue:e.productAmount,"onUpdate:modelValue":t[2]||(t[2]=t=>e.productAmount=t)},null,8,["modelValue"]),(0,o._)("button",{disabled:e.addingStatus.isSending,class:"button button--primery",type:"submit"}," В корзину ",8,Lt)]),(0,o.Wm)(d,{open:e.addingStatus.isAdded,"onUpdate:open":t[3]||(t[3]=t=>e.addingStatus.isAdded=t)},{default:(0,o.w5)((()=>[(0,o.Uk)(" Товар добавлен в корзину ")])),_:1},8,["open"]),e.addingStatus.isAdded?((0,o.wg)(),(0,o.iD)("div",Kt,"Товар добавлен в корзину")):(0,o.kq)("",!0),e.addingStatus.isSending?((0,o.wg)(),(0,o.iD)("div",xt,"Добавляем товар в корзину")):(0,o.kq)("",!0)],32)])]),(0,o._)("div",Wt,[(0,o.Wm)(m,{tabs:e.tabs,onSelectTab:e.switchTabs},null,8,["tabs","onSelectTab"]),((0,o.wg)(),(0,o.j4)((0,o.LL)(e.selectedTab),{product:e.product},null,8,["product"]))])])]))}const Mt={class:"breadcrumbs"},Yt={key:1,class:"breadcrumbs__link"};function Et(e,t,a,r,l,n){const c=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("ul",Mt,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.crumbs,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{class:"breadcrumbs__item",key:t},[e.name?((0,o.wg)(),(0,o.j4)(c,{key:0,to:{name:e.name,query:{categoryId:e.id}},class:"breadcrumbs__link"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,p.zw)(e.title),1)])),_:2},1032,["to"])):((0,o.wg)(),(0,o.iD)("p",Yt,(0,p.zw)(e.title),1))])))),128))])}var Rt=(0,o.aZ)({props:{crumbs:{type:Array,default:()=>[]}}});const $t=(0,v.Z)(Rt,[["render",Et]]);var Gt=$t,Nt=a(2689),Qt=a(2558),Jt=a(5263),Xt=a(9098),ea=(0,o.aZ)({components:{CustomCounter:Te.Z,PreloaderPic:M.Z,BaseBreadcrumbs:Gt,BaseModal:ie.Z,BaseTabs:Nt.Z,DescriptionTab:Qt.Z,SpecificationsTab:Jt.Z},setup(){const e=(0,H.yj)(),{product:t,category:a,fetchProduct:r,fetchStatus:l,addingStatus:n,addProduct:c,offersPrice:s,selectedOffersValue:i,selectedColorValue:u,content:d,tabs:p,switchTabs:m,selectedTab:_}=(0,Xt.Z)(),f=(0,de.iH)(1),v=(0,o.Fl)((()=>[{title:"Каталог",name:"main"},{title:a.value.title,name:"main",id:a.value.id},{title:t.value.title,name:""}]));return r(e.params.id),{productAmount:f,productStatus:l,product:t,category:a,breadcrumbsData:v,addingStatus:n,doAddToCart:c,content:d,offersPrice:s,selectedOffersValue:i,selectedColorValue:u,tabs:p,switchTabs:m,selectedTab:_,typesProps:ue}}});const ta=(0,v.Z)(ea,[["render",Bt]]);var aa=ta;const ra={key:0,class:"content container"},oa={key:1,class:"content container"},la={key:2,class:"content container"},na={class:"content__top"},ca=(0,o._)("h1",{class:"content__title"},"Корзина",-1),sa={class:"content__info"},ia={class:"cart"},ua={class:"cart__form form",action:"#",method:"POST"},da={class:"cart__field"},pa={class:"cart__list"},ma={class:"cart__block"},_a=(0,o._)("p",{class:"cart__desc"}," Мы посчитаем стоимость доставки на следующем этапе ",-1),fa={class:"cart__price"},va=["disabled","onClick"];function ga(e,t,a,r,l,n){const c=(0,o.up)("preloader-pic"),s=(0,o.up)("base-breadcrumbs"),i=(0,o.up)("cart-item"),u=(0,o.up)("router-link");return e.cartLoading?((0,o.wg)(),(0,o.iD)("main",ra,[(0,o.Wm)(c)])):e.cartLoadingFailed?((0,o.wg)(),(0,o.iD)("main",oa," Не удалось загрузить корзину ")):((0,o.wg)(),(0,o.iD)("main",la,[(0,o._)("div",na,[(0,o.Wm)(s,{crumbs:e.breadcrumbsData},null,8,["crumbs"]),ca,(0,o._)("span",sa,(0,p.zw)(e.messageCartAmount),1)]),(0,o._)("section",ia,[(0,o._)("form",ua,[(0,o._)("div",da,[(0,o._)("ul",pa,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.products,(e=>((0,o.wg)(),(0,o.j4)(i,{key:e.productId,item:e},null,8,["item"])))),128))])]),(0,o._)("div",ma,[_a,(0,o._)("p",fa,[(0,o.Uk)(" Итого: "),(0,o._)("span",null,(0,p.zw)(e.totalPriceFormat)+" ₽",1)]),(0,o.Wm)(u,{to:{name:"order"},custom:""},{default:(0,o.w5)((({navigate:t})=>[(0,o._)("button",{class:"cart__button button button--primery",type:"button",disabled:!e.totalPrice,onClick:t}," Оформить заказ ",8,va)])),_:1})])])])]))}const ya={class:"cart__item product"},ba={class:"product__pic"},ka=["src","srcset","alt"],ha={class:"product__title"},wa={class:"product__code"},Pa={key:0,class:"product__code__color"},Ca={key:1},Da={class:"product__price"},Va=(0,o._)("svg",{width:"20",height:"20",fill:"currentColor"},[(0,o._)("use",{"xlink:href":"#icon-close"})],-1),Fa=[Va];function Ta(e,t,a,l,n,c){const s=(0,o.up)("custom-counter");return(0,o.wg)(),(0,o.iD)("li",ya,[(0,o._)("div",ba,[(0,o._)("img",{src:e.item.product.imageSrc,width:"120",height:"120",srcset:e.item.product.imageSrcset,alt:e.item.product.title},null,8,ka)]),(0,o._)("h3",ha,(0,p.zw)(e.item.product.title),1),(0,o._)("div",wa,[e.item.color?((0,o.wg)(),(0,o.iD)("span",Pa,[(0,o.Uk)(" Цвет: "),(0,o._)("span",{class:"colors__value",style:(0,p.j5)({"background-color":e.item.color.code})},null,4),(0,o.Uk)(" "+(0,p.zw)(e.item.color.title),1)])):(0,o.kq)("",!0),e.item.prop&&e.typesProps.color.code!==e.item.prop.code?((0,o.wg)(),(0,o.iD)("span",Ca,(0,p.zw)(e.item.prop.title)+": "+(0,p.zw)(e.item.prop.value),1)):(0,o.kq)("",!0),(0,o._)("span",null," Артикул: "+(0,p.zw)(e.item.cartProductId),1)]),(0,o.Wm)(s,{modelValue:e.quantity,"onUpdate:modelValue":t[0]||(t[0]=t=>e.quantity=t)},null,8,["modelValue"]),(0,o._)("b",Da,(0,p.zw)(e.totalPriceProduct)+" ₽ ",1),(0,o._)("button",{onClick:t[1]||(t[1]=(0,r.iM)((t=>e.deleteProduct(e.item.cartProductId)),["prevent"])),class:"product__del button-del",type:"button","aria-label":"Удалить товар из корзины"},Fa)])}var Za=(0,o.aZ)({components:{CustomCounter:Te.Z},props:["item"],setup(e){const t=(0,k.oR)(),a=(0,o.Fl)((()=>(0,se.Z)(e.item.product.price*e.item.quantity))),r=(0,o.Fl)({get(){return e.item.quantity},set(a){t.dispatch("updateCartProductAmount",{basketItemId:e.item.cartProductId,quantity:a})}});(0,o.YP)(r,(a=>{a||t.dispatch("deleteProductToCart",e.item.cartProductId)}));const l=e=>t.dispatch("deleteProductToCart",e);return{totalPriceProduct:a,quantity:r,deleteProduct:l,typesProps:ue}}});const Oa=(0,v.Z)(Za,[["render",Ta]]);var Ia=Oa,Sa=(0,o.aZ)({components:{CartItem:Ia,PreloaderPic:M.Z,BaseBreadcrumbs:Gt},setup(){const e=(0,k.oR)(),t=(0,o.Fl)((()=>e.getters.cartTotalPrice)),a=(0,o.Fl)((()=>(0,se.Z)(t.value))),r=(0,o.Fl)((()=>[{title:"Каталог",name:"main"},{title:"Корзина",name:""}])),l=(0,o.Fl)((()=>e.getters.cartDetailProducts)),n=(0,o.Fl)((()=>e.getters.cartTotalAmount)),c=(0,o.Fl)((()=>{let e=["товар","товара","товаров"];return n.value+" "+nt(n.value,e)})),s=(0,o.Fl)((()=>e.getters.isCartLoading)),i=(0,o.Fl)((()=>e.getters.isCartLoadingFailed));return{totalPriceFormat:a,messageCartAmount:c,breadcrumbsData:r,products:l,totalPrice:t,totalAmount:n,cartLoading:s,cartLoadingFailed:i,wordFormat:nt}}});const za=(0,v.Z)(Sa,[["render",ga]]);var qa=za;const Ha={class:"content container"},Aa={class:"content__top"},ja=(0,o._)("h1",{class:"content__title"},"Корзина",-1),Ua=(0,o._)("span",{class:"content__info"}," 3 товара ",-1),La={class:"cart"},Ka={class:"cart__form form"},xa={key:0,class:"cart__field"},Wa={class:"cart__data"},Ba={class:"cart__options"},Ma={key:1,class:"cart__field"},Ya={key:2,class:"cart__error form__error-block"},Ea=(0,o._)("h4",null,"Заявка не отправлена!",-1);function Ra(e,t,a,r,l,n){const c=(0,o.up)("base-breadcrumbs"),s=(0,o.up)("base-form-text"),i=(0,o.up)("base-form-textarea"),u=(0,o.up)("base-options"),d=(0,o.up)("preloader-pic"),m=(0,o.up)("base-cart-block");return(0,o.wg)(),(0,o.iD)("main",Ha,[(0,o._)("div",Aa,[(0,o.Wm)(c,{crumbs:e.breadcrumbsData},null,8,["crumbs"]),ja,Ua]),(0,o._)("section",La,[(0,o._)("form",Ka,[e.isSending?((0,o.wg)(),(0,o.iD)("div",Ma,[(0,o.Wm)(d)])):((0,o.wg)(),(0,o.iD)("div",xa,[(0,o._)("div",Wa,[(0,o.Wm)(s,{title:"ФИО",placeholder:"Введите ваше полное имя",error:e.formError.name,modelValue:e.formData.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData.name=t)},null,8,["error","modelValue"]),(0,o.Wm)(s,{title:"Адрес доставки",modelValue:e.formData.address,"onUpdate:modelValue":t[1]||(t[1]=t=>e.formData.address=t),error:e.formError.address,placeholder:"Введите ваш адрес"},null,8,["modelValue","error"]),(0,o.Wm)(s,{title:"Телефон",type:"tel",modelValue:e.formData.phone,"onUpdate:modelValue":t[2]||(t[2]=t=>e.formData.phone=t),error:e.formError.phone,placeholder:"Введите ваш телефон"},null,8,["modelValue","error"]),(0,o.Wm)(s,{title:"Email",type:"email",modelValue:e.formData.email,"onUpdate:modelValue":t[3]||(t[3]=t=>e.formData.email=t),error:e.formError.email,placeholder:"Введи ваш Email"},null,8,["modelValue","error"]),(0,o.Wm)(i,{title:"Комментарий к заказу",modelValue:e.formData.comment,"onUpdate:modelValue":t[4]||(t[4]=t=>e.formData.comment=t),placeholder:"Ваши пожелания",error:e.formError.comment},null,8,["modelValue","error"])]),(0,o._)("div",Ba,[(0,o.Wm)(u,{title:"Доставка","options-data":e.deliveryData,modelValue:e.formData.delivery,"onUpdate:modelValue":t[5]||(t[5]=t=>e.formData.delivery=t)},null,8,["options-data","modelValue"]),(0,o.Wm)(u,{title:"Оплата","options-data":e.paymentsData,modelValue:e.formData.payment,"onUpdate:modelValue":t[6]||(t[6]=t=>e.formData.payment=t)},null,8,["options-data","modelValue"])])])),(0,o.Wm)(m,{"cart-data":e.cartData,"is-button":!0,disabled:e.isSending,onOnClick:e.sendOrder},null,8,["cart-data","disabled","onOnClick"]),e.formErrorMessage?((0,o.wg)(),(0,o.iD)("div",Ya,[Ea,(0,o._)("p",null,(0,p.zw)(e.formErrorMessage),1)])):(0,o.kq)("",!0)])])])}const $a=["type","placeholder"];function Ga(e,t,a,l,n,c){const s=(0,o.up)("base-form-field");return(0,o.wg)(),(0,o.j4)(s,{title:e.title,error:e.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("input",{class:"form__input",type:e.type,placeholder:e.placeholder,"onUpdate:modelValue":t[0]||(t[0]=t=>e.dataValue=t)},null,8,$a),[[r.YZ,e.dataValue]])])),_:1},8,["title","error"])}const Na={class:"form__label"},Qa={class:"form__value"},Ja={key:0,class:"form__error"};function Xa(e,t,a,r,l,n){return(0,o.wg)(),(0,o.iD)("label",Na,[(0,o.WI)(e.$slots,"default"),(0,o._)("span",Qa,(0,p.zw)(e.title),1),e.error?((0,o.wg)(),(0,o.iD)("span",Ja,(0,p.zw)(e.error),1)):(0,o.kq)("",!0)])}var er=(0,o.aZ)({props:{title:{type:String,default:""},error:{type:String,default:""}}});const tr=(0,v.Z)(er,[["render",Xa]]);var ar=tr,rr=(0,o.aZ)({name:"BaseFormText",props:{title:{type:String,default:""},placeholder:{type:String,default:""},error:{type:String,default:""},modelValue:{type:String,default:""},type:{type:String,default:"text"}},components:{BaseFormField:ar},setup(e,{emit:t}){const a=(0,o.Fl)({get(){return e.modelValue},set(e){t("update:modelValue",e)}});return{dataValue:a}}});const or=(0,v.Z)(rr,[["render",Ga]]);var lr=or;const nr=["placeholder"];function cr(e,t,a,l,n,c){const s=(0,o.up)("base-form-field");return(0,o.wg)(),(0,o.j4)(s,{title:e.title,error:e.error},{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("textarea",{class:"form__input form__input--area","onUpdate:modelValue":t[0]||(t[0]=t=>e.dataValue=t),placeholder:e.placeholder},null,8,nr),[[r.nr,e.dataValue]])])),_:1},8,["title","error"])}var sr=(0,o.aZ)({name:"BaseFormTextarea",props:{title:{type:String,default:""},placeholder:{type:String,default:""},error:{type:String,default:""},modelValue:{type:String,default:""}},components:{BaseFormField:ar},setup(e,{emit:t}){const a=(0,o.Fl)({get(){return e.modelValue},set(e){t("update:modelValue",e)}});return{dataValue:a}}});const ir=(0,v.Z)(sr,[["render",cr]]);var ur=ir;const dr={class:"cart__block"},pr={class:"cart__orders"},mr={key:0,class:"cart__total"},_r={key:0},fr=["disabled"];function vr(e,t,a,l,n,c){return(0,o.wg)(),(0,o.iD)("div",dr,[(0,o._)("ul",pr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.products,(t=>((0,o.wg)(),(0,o.iD)("li",{class:"cart__order",key:t.productId},[(0,o._)("h3",null,(0,p.zw)(t.product?.title),1),(0,o._)("b",null,(0,p.zw)(e.totalPriceProduct(t))+" ₽",1),(0,o._)("span",null,"Количество: "+(0,p.zw)(t.quantity),1),(0,o._)("span",null,"Артикул: "+(0,p.zw)(t.product?.id),1)])))),128))]),e.isCartTotal?((0,o.wg)(),(0,o.iD)("div",mr,[e.delivery?((0,o.wg)(),(0,o.iD)("p",_r,[(0,o.Uk)((0,p.zw)(e.delivery.title)+": ",1),(0,o._)("b",null,(0,p.zw)(e.costDelivery)+" ₽",1)])):(0,o.kq)("",!0),(0,o._)("p",null,[(0,o.Uk)(" Итого: "),(0,o._)("b",null,(0,p.zw)(e.totalAmount),1),(0,o.Uk)(" "+(0,p.zw)(e.messageTotalProducts)+" на сумму ",1),(0,o._)("b",null,(0,p.zw)(e.totalPrice)+" ₽",1)])])):(0,o.kq)("",!0),e.isButton?((0,o.wg)(),(0,o.iD)("button",{key:1,class:"cart__button button button--primery",type:"button",disabled:e.disabled,onClick:t[0]||(t[0]=(0,r.iM)(((...t)=>e.onClick&&e.onClick(...t)),["prevent"]))}," Оформить заказ ",8,fr)):(0,o.kq)("",!0)])}var gr=(0,o.aZ)({props:{cartData:{type:Object,default:()=>({})},isButton:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(e,{emit:t}){const a=(0,o.Fl)((()=>e.cartData?.costDelivery||null)),r=(0,o.Fl)((()=>e.cartData?.totalAmount||null)),l=(0,o.Fl)((()=>e.cartData?.totalPrice||null)),n=(0,o.Fl)((()=>r.value&&l.value)),c=(0,o.Fl)((()=>e.cartData?.products||[])),s=(0,o.Fl)((()=>"0"!==a.value.price?a.value.price:"бесплатно")),i=(0,o.Fl)((()=>{const e=["товар","товара","товаров"];return l.value?nt(l.value,e):""})),u=()=>t("onClick"),d=e=>{const t=e.product?.price*e.quantity;return(0,se.Z)(t)};return{delivery:a,totalAmount:r,totalPrice:l,isCartTotal:n,products:c,onClick:u,totalPriceProduct:d,costDelivery:s,messageTotalProducts:i}}});const yr=(0,v.Z)(gr,[["render",vr]]);var br=yr;const kr={key:0,class:"cart__title"},hr={key:1,class:"cart__options options"},wr={class:"options__label"},Pr=["name","value","checked"],Cr={class:"options__value"},Dr={key:0};function Vr(e,t,a,l,n,c){return(0,o.wg)(),(0,o.iD)(o.HY,null,[a.title?((0,o.wg)(),(0,o.iD)("h3",kr,(0,p.zw)(a.title),1)):(0,o.kq)("",!0),l.isEmptyOptions?((0,o.wg)(),(0,o.iD)("ul",hr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.options,(e=>((0,o.wg)(),(0,o.iD)("li",{key:e.id,class:"options__item"},[(0,o._)("label",wr,[(0,o.wy)((0,o._)("input",{class:"options__radio sr-only",type:"radio",name:a.title,value:e,"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedOption=e),checked:l.selectedOption.id===e.id},null,8,Pr),[[r.G2,l.selectedOption]]),(0,o._)("span",Cr,[(0,o.Uk)((0,p.zw)(e.title)+" ",1),e.price?((0,o.wg)(),(0,o.iD)("b",Dr,(0,p.zw)("0"!==e.price?`${e.price} ₽`:"бесплатно"),1)):(0,o.kq)("",!0)])])])))),128))])):(0,o.kq)("",!0)],64)}var Fr={props:{title:{type:String,default:""},optionsData:{type:Array,default:()=>[]},modelValue:{type:Object,default:()=>({})}},setup(e,{emit:t}){const a=(0,o.Fl)((()=>e.optionsData.length)),r=(0,o.Fl)((()=>e.optionsData||[])),l=(0,o.Fl)({get(){return e.modelValue},set(e){null!==e&&t("update:modelValue",e)}});return(0,o.YP)(r,(e=>{l.value=e.at(0)||null}),{immediate:!0}),{isEmptyOptions:a,selectedOption:l,options:r}}};const Tr=(0,v.Z)(Fr,[["render",Vr]]);var Zr=Tr,Or=(0,o.aZ)({components:{BaseBreadcrumbs:Gt,BaseFormText:lr,BaseFormTextarea:ur,PreloaderPic:M.Z,BaseCartBlock:br,BaseOptions:Zr},setup(){const e=(0,k.oR)(),t=(0,de.qj)({}),a=(0,de.iH)(500),r=(0,o.Fl)((()=>e.getters.cartDetailProducts)),l=(0,o.Fl)((()=>e.getters.cartTotalAmount)),n=(0,o.Fl)((()=>e.getters.cartTotalPrice)),c=(0,o.Fl)((()=>({products:r.value,costDelivery:a.value,totalAmount:l.value,totalPrice:n.value}))),s=(0,o.Fl)((()=>[{title:"Каталог",name:"main"},{title:"Корзина",name:"cart"},{title:"Оформление заказа",name:""}])),i=(0,de.iH)({}),u=(0,de.iH)(""),d=(0,de.iH)(!1),p=()=>{d.value=!0,i.value={},R().post(Y.C+"/api/orders",{...t,deliveryTypeId:t.delivery?.id,paymentTypeId:t.payment?.id},{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{setTimeout((()=>d.value=!1),1e3),e.commit("resetCart"),e.commit("updateOrderInfo",t.data),Nr.replace({name:"orderInfo",params:{id:t.data.id}})})).catch((e=>{setTimeout((()=>d.value=!1),1e3),i.value=e.response.data.error.request||{},u.value=e.response.data.error.message||""}))},m=(0,de.iH)([]),_=()=>{try{R().get(Y.C+"/api/deliveries").then((e=>{m.value=e.data.map((e=>({...e,price:(0,se.Z)(e.price)})))})).then((()=>{v(t.delivery?.id)}))}catch(e){console.log(e)}},f=(0,de.iH)([]),v=e=>{try{R().get(Y.C+"/api/payments",{params:{deliveryTypeId:e}}).then((e=>{f.value=e.data}))}catch(t){console.error(t)}};return(0,o.m0)((()=>{t.delivery?.id&&(a.value=t.delivery,v(t.delivery.id))})),(0,o.bv)((()=>{_()})),{cartData:c,breadcrumbsData:s,sendOrder:p,formData:t,isSending:d,formError:i,formErrorMessage:u,deliveryData:m,paymentsData:f}}});const Ir=(0,v.Z)(Or,[["render",Ra]]);var Sr=Ir;const zr={class:"content container"},qr={class:"content__top"},Hr={class:"content__title"},Ar={class:"cart"},jr={class:"cart__form form",action:"#",method:"POST"},Ur={class:"cart__field"},Lr=(0,o._)("p",{class:"cart__message"}," Благодарим за выбор нашего магазина. На Вашу почту придет письмо с деталями заказа. Наши менеджеры свяжутся с Вами в течение часа для уточнения деталей доставки. ",-1),Kr={class:"dictionary"},xr={class:"dictionary__key"},Wr={class:"dictionary__value"};function Br(e,t,a,r,l,n){const c=(0,o.up)("base-breadcrumbs"),s=(0,o.up)("base-cart-block");return(0,o.wg)(),(0,o.iD)("main",zr,[(0,o._)("div",qr,[(0,o.Wm)(c,{crumbs:e.breadcrumbsData},null,8,["crumbs"]),(0,o._)("h1",Hr,[(0,o.Uk)(" Заказ оформлен "),(0,o._)("span",null,"№ "+(0,p.zw)(e.orderInfo?.basket?.id),1)])]),(0,o._)("section",Ar,[(0,o._)("form",jr,[(0,o._)("div",Ur,[Lr,(0,o._)("ul",Kr,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.infoBuyer,((e,t)=>((0,o.wg)(),(0,o.iD)("li",{class:"dictionary__item",key:t},[(0,o._)("span",xr,(0,p.zw)(e.title),1),(0,o._)("span",Wr,(0,p.zw)(e.description),1)])))),128))])]),(0,o.Wm)(s,{"cart-data":e.cartData},null,8,["cart-data"])])])])}var Mr=(0,o.aZ)({components:{BaseCartBlock:br,BaseBreadcrumbs:Gt},setup(){const e=(0,k.oR)(),t=(0,H.yj)(),a=(0,o.Fl)((()=>e.getters.orderInfo)),r=(0,o.Fl)((()=>a.value?.basket.items.map((e=>({...e,product:{...e.productOffer}})))||[])),l=(0,o.Fl)((()=>r.value.reduce(((e,t)=>e+t.quantity),0))),n=(0,o.Fl)((()=>a.value?.totalPrice)),c=(0,o.Fl)((()=>[{title:"Каталог",name:"main"},{title:"Корзина",name:"cart"},{title:"Оформление заказа",name:""}])),s=(0,o.Fl)((()=>({products:r.value,costDelivery:a.value?.deliveryType,totalAmount:l.value,totalPrice:n.value}))),i=(0,o.Fl)((()=>[{title:"Получатель",description:a.value?.name||""},{title:"Адрес доставки",description:a.value?.address||""},{title:"Телефон",description:a.value?.phone||""},{title:"Email",description:a.value?.email||""},{title:"Способ оплаты",description:a.value?.paymentType||""}]));return a.value||a.value?.id===+t.params.id||e.dispatch("loadOrderInfo",t.params.id),{infoBuyer:i,cartData:s,orderInfo:a,breadcrumbsData:c}}});const Yr=(0,v.Z)(Mr,[["render",Br]]);var Er=Yr;const Rr="/study-project-market/",$r=[{name:"main",component:it,path:"/"},{name:"product",component:aa,path:"/product/:id"},{name:"cart",component:qa,path:"/cart"},{name:"order",component:Sr,path:"/order"},{name:"orderInfo",component:Er,path:"/order/:id"},{name:"notFound",component:mt,path:"/:pathMatch(.*)*"}],Gr=(0,H.p7)({history:(0,H.r5)(Rr),routes:$r});var Nr=Gr,Qr=(0,k.MT)({state:{cartProducts:[],userAccessKey:null,cartProductsData:[],cartLoading:!1,cartLoadingFailed:!1,orderInfo:null},mutations:{updateOrderInfo(e,t){e.orderInfo=t},resetCart(e){e.cartProducts=[],e.cartProductsData=[]},updateCartProductAmount(e,{basketItemId:t,quantity:a}){const r=e.cartProducts.find((e=>e.cartProductId===t));r&&(r.quantity=a)},deleteCartProduct(e,t){e.cartProducts=e.cartProducts.filter((e=>e.productId!==t))},updateUserAccessKey(e,t){e.userAccessKey=t},updateCartProductsData(e,t){e.cartProductsData=t},syncCartProducts(e){e.cartProducts=e.cartProductsData.map((e=>({productId:e.productOffer?.product?.id,cartProductId:e.id,quantity:e.quantity})))},updateCartLoading(e,t){e.cartLoading=t},updateCartLoadingFailed(e,t){e.cartLoadingFailed=t}},getters:{cartDetailProducts(e){return e.cartProducts.map((t=>{const a=e.cartProductsData.find((e=>e.id===t.cartProductId));return{...t,color:a?.color?.color,prop:{value:a?.productOffer?.propValues?.at(0)?.value,title:a?.productOffer?.product?.mainProp?.title,code:a?.productOffer?.product?.mainProp?.code},product:{...a?.productOffer,imageSrc:a?.productOffer?.product?.preview?.file?.url}}}))},cartTotalPrice(e,t){return t.cartDetailProducts.reduce(((e,t)=>t.product.price*t.quantity+e),0)},cartTotalAmount(e,t){return t.cartDetailProducts.reduce(((e,t)=>t.quantity+e),0)},isCartLoading(e){return e.cartLoading},isCartLoadingFailed(e){return e.cartLoadingFailed},orderInfo(e){return e.orderInfo}},actions:{loadOrderInfo(e,t){return R().get(Y.C+"/api/orders/"+t,{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{e.commit("updateOrderInfo",t.data)}))},loadCart(e){return e.commit("updateCartLoading",!0),e.commit("updateCartLoadingFailed",!1),R().get(Y.C+"/api/baskets",{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{e.state.userAccessKey||(localStorage.setItem("userAccessKey",t.data.user.accessKey),e.commit("updateUserAccessKey",t.data.user.accessKey)),e.commit("updateCartProductsData",t.data.items),e.commit("syncCartProducts")})).catch((t=>{console.error(t),e.commit("updateCartLoadingFailed",!0)})).then((()=>e.commit("updateCartLoading",!1)))},addProductToCart(e,{productOfferId:t,quantity:a,colorId:r}){return new Promise((e=>setTimeout(e,1e3))).then((()=>R().post(Y.C+"/api/baskets/products",{productOfferId:t,quantity:a,colorId:r},{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{e.commit("updateCartProductsData",t.data.items),e.commit("syncCartProducts")}))))},updateCartProductAmount(e,{basketItemId:t,quantity:a}){if(e.commit("updateCartProductAmount",{basketItemId:t,quantity:a}),!(a<1))return R().put(Y.C+"/api/baskets/products",{basketItemId:t,quantity:a},{params:{userAccessKey:e.state.userAccessKey}}).then((t=>{e.commit("updateCartProductsData",t.data.items)})).catch((()=>{e.commit("syncCartProducts")}))},deleteProductToCart(e,t){return e.commit("deleteCartProduct",t),R()["delete"](Y.C+"/api/baskets/products",{params:{userAccessKey:e.state.userAccessKey},data:{basketItemId:t}}).then((t=>{e.commit("updateCartProductsData",t.data.items),e.commit("syncCartProducts")}))}}});(0,r.ri)(q).use(Qr).use(Nr).mount("#app")},3918:function(e,t,a){a.d(t,{Z:function(){return p}});var r=a(3396);const o=(0,r._)("div",{class:"modal__blackout"},null,-1),l={ref:"contentElement",class:"modal__wrap__content"};function n(e,t,a,n,c,s){return e.open?((0,r.wg)(),(0,r.j4)(r.lR,{key:0,to:"#teleport-target"},[o,(0,r._)("div",{class:"modal__wrap",onClick:t[1]||(t[1]=(...t)=>e.onOutsideClick&&e.onOutsideClick(...t))},[(0,r._)("div",l,[(0,r.WI)(e.$slots,"default"),(0,r._)("button",{type:"button",class:"modal__wrap__close",onClick:t[0]||(t[0]=(...t)=>e.doClose&&e.doClose(...t))}," ✖ ")],512)])])):(0,r.kq)("",!0)}var c=a(4870),s=a(7460),i=(0,r.aZ)({props:{open:{type:Boolean}},setup(e,{emit:t}){const a=(0,c.iH)(null),{doOpen:o,doClose:l}=(0,s.Z)(),n=e=>{e.target!==a.value&&e.target.contains(a.value)&&i()},i=()=>{t("update:open",!1)};return(0,r.YP)((()=>e.open),(e=>{e?o():l()}),{immediate:!0}),e.open&&o(),{onOutsideClick:n,doClose:i,contentElement:a}}}),u=a(89);const d=(0,u.Z)(i,[["render",n]]);var p=d},2689:function(e,t,a){a.d(t,{Z:function(){return m}});var r=a(3396),o=a(7139),l=a(9242);const n={class:"tabs"},c=["onClick"];function s(e,t,a,s,i,u){return(0,r.wg)(),(0,r.iD)("ul",n,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.tabs,((e,t)=>((0,r.wg)(),(0,r.iD)("li",{class:"tabs__item",key:t},[(0,r._)("a",{class:(0,o.C_)(["tabs__link","pointer",{"tabs__link--current":s.selectedTab===e.name}]),onClick:(0,l.iM)((t=>s.selectTab(e.name)),["prevent"])},(0,o.zw)(e.text),11,c)])))),128))])}var i=a(4870),u={name:"BaseTabs",props:{tabs:{type:Array,required:!0}},setup(e,{emit:t}){const a=(0,i.iH)(e.tabs?e.tabs[0].name:""),r=e=>{a.value=e,t("select-tab",a.value)};return{selectedTab:a,selectTab:r}}},d=a(89);const p=(0,d.Z)(u,[["render",s]]);var m=p},9074:function(e,t,a){a.d(t,{Z:function(){return f}});var r=a(3396),o=a(9242);const l={class:"product__counter form__counter"},n=(0,r._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-minus"})],-1),c=[n],s=["value"],i=(0,r._)("svg",{width:"10",height:"10",fill:"currentColor"},[(0,r._)("use",{"xlink:href":"#icon-plus"})],-1),u=[i];function d(e,t,a,n,i,d){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("button",{onClick:t[0]||(t[0]=(0,o.iM)((t=>e.updateValue(e.valueCounter-1)),["prevent"])),type:"button","aria-label":"Убрать один товар"},c),(0,r._)("input",{min:"0",max:"200",step:"1",type:"number",value:e.valueCounter,onInput:t[1]||(t[1]=t=>e.updateValue(t.target.value)),name:"count"},null,40,s),(0,r._)("button",{onClick:t[2]||(t[2]=(0,o.iM)((t=>e.updateValue(e.valueCounter+1)),["prevent"])),type:"button","aria-label":"Добавить один товар"},u)])}var p=(0,r.aZ)({props:["modelValue"],setup(e,{emit:t}){const a=(0,r.Fl)((()=>e.modelValue||1)),o=e=>t("update:modelValue",+e>0?+e:0);return{valueCounter:a,updateValue:o}}}),m=a(89);const _=(0,m.Z)(p,[["render",d]]);var f=_},4877:function(e,t,a){a.d(t,{Z:function(){return i}});var r=a(3396);const o={class:"loader"};function l(e,t){return(0,r.wg)(),(0,r.iD)("div",o,"loading")}var n=a(89);const c={},s=(0,n.Z)(c,[["render",l]]);var i=s},2558:function(e,t,a){a.d(t,{Z:function(){return d}});var r=a(3396);const o={class:"item__content"},l=["innerHTML"],n={key:1};function c(e,t,a,c,s,i){return(0,r.wg)(),(0,r.iD)("div",o,[a.product.content?((0,r.wg)(),(0,r.iD)("div",{key:0,innerHTML:a.product.content},null,8,l)):((0,r.wg)(),(0,r.iD)("div",n,"Информация отсутствует"))])}var s={name:"DescriptionTab",props:{product:{type:Object,default:()=>({})}}},i=a(89);const u=(0,i.Z)(s,[["render",c]]);var d=u},5263:function(e,t,a){a.d(t,{Z:function(){return d}});var r=a(3396),o=a(7139);const l={class:"item__content"},n={key:1};function c(e,t,a,c,s,i){return(0,r.wg)(),(0,r.iD)("div",l,[a.product.specifications?((0,r.wg)(!0),(0,r.iD)(r.HY,{key:0},(0,r.Ko)(a.product.specifications,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{key:t},[(0,r._)("h3",null,(0,o.zw)(e.title),1),(0,r._)("p",null,(0,o.zw)(e.value),1)])))),128)):((0,r.wg)(),(0,r.iD)("div",n,"Информация отсутствует"))])}var s={name:"SpecificationsTab",props:{product:{type:Object,default:()=>({})}}},i=a(89);const u=(0,i.Z)(s,[["render",c]]);var d=u}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,l){if(!r){var n=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],l=e[u][2];for(var c=!0,s=0;s<r.length;s++)(!1&l||n>=l)&&Object.keys(a.O).every((function(e){return a.O[e](r[s])}))?r.splice(s--,1):(c=!1,l<n&&(n=l));if(c){e.splice(u--,1);var i=o();void 0!==i&&(t=i)}}return t}l=l||0;for(var u=e.length;u>0&&e[u-1][2]>l;u--)e[u]=e[u-1];e[u]=[r,o,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+".c497dc6c.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="study-market-vue3:";a.l=function(r,o,l,n){if(e[r])e[r].push(o);else{var c,s;if(void 0!==l)for(var i=document.getElementsByTagName("script"),u=0;u<i.length;u++){var d=i[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+l){c=d;break}}c||(s=!0,c=document.createElement("script"),c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.setAttribute("data-webpack",t+l),c.src=r),e[r]=[o];var p=function(t,a){c.onerror=c.onload=null,clearTimeout(m);var o=e[r];if(delete e[r],c.parentNode&&c.parentNode.removeChild(c),o&&o.forEach((function(e){return e(a)})),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),s&&document.head.appendChild(c)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/study-market-vue3/"}(),function(){var e={143:0};a.f.j=function(t,r){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var l=new Promise((function(a,r){o=e[t]=[a,r]}));r.push(o[2]=l);var n=a.p+a.u(t),c=new Error,s=function(r){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var l=r&&("load"===r.type?"missing":r.type),n=r&&r.target&&r.target.src;c.message="Loading chunk "+t+" failed.\n("+l+": "+n+")",c.name="ChunkLoadError",c.type=l,c.request=n,o[1](c)}};a.l(n,s,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,l,n=r[0],c=r[1],s=r[2],i=0;if(n.some((function(t){return 0!==e[t]}))){for(o in c)a.o(c,o)&&(a.m[o]=c[o]);if(s)var u=s(a)}for(t&&t(r);i<n.length;i++)l=n[i],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(u)},r=self["webpackChunkstudy_market_vue3"]=self["webpackChunkstudy_market_vue3"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(381)}));r=a.O(r)})();
//# sourceMappingURL=app.557db76b.js.map